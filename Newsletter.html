<!--
  Newsletter section — Fondation Delon Tena Tena
  Champ "Pays / Région" transformé en <select> avec pays préremplis.
  Tous les styles, animations, validations et effets d'origine sont conservés.
-->

<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Newsletter — Fondation Delon Tena Tena</title>

  <style>
    :root{
      --bg-start:#0f5b3a;
      --bg-end:#1aa069;
      --overlay:rgba(0,0,0,0.25);
      --text-light:#f6f7f3;
      --muted:rgba(246,247,243,0.85);
      --yellow:#ffd24d;
      --danger:#ff6b6b;
      --success:#3ec47d;
      --radius:12px;
      --gap:12px;
      --max-width:1100px;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text-light);
      background:linear-gradient(180deg,var(--bg-start),var(--bg-end));
      font-size:16px;
      line-height:1.4;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:48px 20px;
    }
    .newsletter-section{
      width:100%;
      max-width:var(--max-width);
      background:linear-gradient(180deg,rgba(0,0,0,0.14),rgba(0,0,0,0.08)),
                 linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      border-radius:20px;
      padding:48px;
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      position:relative;
      overflow:hidden;
    }
    .newsletter-section::before{
      content:"";
      position:absolute;
      right:-120px;
      top:-80px;
      width:420px;
      height:420px;
      background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.06),transparent 30%),
                 radial-gradient(circle at 70% 70%,rgba(0,0,0,0.06),transparent 30%);
      transform:rotate(15deg);
      pointer-events:none;
    }
    .newsletter-header{text-align:center;margin:0 0 26px 0;}
    .newsletter-header h2{
      margin:0;
      font-size:clamp(1.4rem,2.4vw,2.2rem);
      letter-spacing:-0.01em;
      font-weight:700;
      color:var(--text-light);
    }
    .newsletter-header p{
      margin:10px auto 0;
      max-width:820px;
      color:var(--muted);
      font-size:clamp(0.95rem,1.4vw,1.05rem);
    }
    .newsletter-form{
      margin-top:28px;
      display:flex;
      gap:var(--gap);
      align-items:center;
      justify-content:center;
      width:100%;
      transition:all .3s ease;
    }
    .field option{
        background-color: #0b2a1a;
    }
    .newsletter-form .field{display:flex;flex-direction:column;gap:6px;flex:1 1 0;min-width:0; }
    .newsletter-form label{font-size:0.75rem;color:rgba(243, 247, 243, 0.75);display:none;}
    .input,.select,.btn{
      width:100%;
      padding:12px 14px;
      background:rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.06);
      color:var(--text-light);
      outline:none;
      border-radius:10px;
      font-size:1rem;
      transition:box-shadow .18s ease,transform .12s ease,border-color .18s ease;
    }
    .input::placeholder{color:rgba(246,247,243,0.6)}
    .input:focus,.select:focus{
      box-shadow:0 6px 18px rgba(0,0,0,0.35),0 0 0 4px rgba(255,255,255,0.03);
      transform:translateY(-1px);
      border-color:rgba(255,255,255,0.12);
    }
    .btn{
      background:var(--yellow);
      color:#0b2a1a;
      font-weight:700;
      border:none;
      cursor:pointer;
      padding:14px 18px;
      white-space:nowrap;
      border-radius:12px;
      box-shadow:0 8px 18px rgba(0,0,0,0.18);
      transition:transform .18s ease,box-shadow .18s ease,filter .12s ease;
      font-size:1rem;
    }
    .btn:active{transform:translateY(1px)}
    .btn:hover{filter:brightness(.98);transform:translateY(-2px);box-shadow:0 12px 26px rgba(0,0,0,0.22)}
    .invalid{animation:invalid-flash 0.9s ease;border-color:var(--danger)!important;box-shadow:0 6px 18px rgba(255,107,107,0.12);}
    @keyframes invalid-flash{
      0%{box-shadow:0 0 0 rgba(255,107,107,0)}
      10%{box-shadow:0 8px 22px rgba(255,107,107,0.16)}
      50%{box-shadow:0 6px 18px rgba(255,107,107,0.12)}
      100%{box-shadow:0 0 0 rgba(255,107,107,0)}
    }
    .success{border-color:var(--success)!important;box-shadow:0 6px 18px rgba(62,196,125,0.12);}
    @media(max-width:880px){
      .newsletter-section{padding:28px;border-radius:14px}
      .newsletter-form{flex-direction:column;align-items:stretch;}
      .newsletter-form .field{width:100%}
      .btn{width:100%}
    }
    @media(min-width:881px){
      .newsletter-form{grid-template-columns:repeat(4,1fr);align-items:center;}
      .btn{flex:0 0 200px;}
    }
    .toast{
      position:fixed;
      bottom:24px;
      right:24px;
      min-width:260px;
      max-width:420px;
      background:rgba(12,12,12,0.94);
      color:var(--text-light);
      padding:12px 16px;
      border-radius:12px;
      box-shadow:0 12px 32px rgba(0,0,0,0.4);
      transform:translateY(20px);
      opacity:0;
      pointer-events:none;
      transition:transform .38s cubic-bezier(.22,.9,.3,1),opacity .38s cubic-bezier(.22,.9,.3,1);
      z-index:1200;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .toast.show{transform:translateY(0);opacity:1;pointer-events:auto}
    .toast .icon{width:38px;height:38px;display:inline-grid;place-items:center;border-radius:8px;font-weight:700;font-size:1.05rem;}
    .toast .content{flex:1;font-size:0.96rem;}
    .toast.success{background:linear-gradient(90deg,rgba(3,40,18,0.95),rgba(6,80,42,0.95));}
    .toast.error{background:linear-gradient(90deg,rgba(60,12,12,0.95),rgba(120,18,18,0.95));}
    .toast.info{background:linear-gradient(90deg,rgba(12,24,44,0.95),rgba(12,36,66,0.95));}
    @media(prefers-reduced-motion:reduce){
      *{transition:none!important;animation:none!important;scroll-behavior:auto!important}
    }
    .reveal{opacity:0;transform:translateY(20px);transition:all .5s cubic-bezier(.22,.9,.3,1);will-change:transform,opacity;}
    .reveal.in-view{opacity:1;transform:translateY(0);}
  </style>
</head>
<body>
  <section class="newsletter-section" aria-labelledby="newsletter-title">
    <div class="newsletter-header reveal">
      <h2 id="newsletter-title">Abonnez-vous à nos actualités</h2>
      <p>Restez connectés à nos actions humanitaires et projets communautaires.  
      Rejoignez notre communauté d'acteurs du changement — recevez des nouvelles, invitations et opportunités directement dans votre boîte mail.</p>
    </div>

    <form class="newsletter-form reveal" novalidate id="newsletterForm">
      <div class="field">
        <label for="prenom">Prénom</label>
        <input id="prenom" name="prenom" type="text" class="input" placeholder="Prénom" aria-label="Prénom" required />
      </div>
      <div class="field">
        <label for="nom">Nom</label>
        <input id="nom" name="nom" type="text" class="input" placeholder="Nom" aria-label="Nom" required />
      </div>
      <div class="field">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" class="input" placeholder="Email" aria-label="Email" required />
      </div>

      <!-- Champ Pays / Région transformé en liste déroulante -->
      <div class="field">
        <label for="pays">Pays / Région</label>
        <select id="pays" name="pays" class="select" aria-label="Pays ou région" required>
          <option value="">Choisissez votre pays / région</option>
          <!-- Afrique -->
          <option value="Congo">Congo</option>
          <option value="RDC">République Démocratique du Congo</option>
          <option value="Sénégal">Sénégal</option>
          <option value="Côte d'Ivoire">Côte d'Ivoire</option>
          <option value="Cameroun">Cameroun</option>
          <option value="Nigeria">Nigeria</option>
          <option value="Kenya">Kenya</option>
          <option value="Afrique du Sud">Afrique du Sud</option>
          <option value="Maroc">Maroc</option>
          <option value="Tunisie">Tunisie</option>
          <!-- Amériques -->
          <option value="États-Unis">États-Unis</option>
          <option value="Canada">Canada</option>
          <option value="Brésil">Brésil</option>
          <option value="Argentine">Argentine</option>
          <option value="Mexique">Mexique</option>
          <option value="Chili">Chili</option>
          <!-- Europe -->
          <option value="France">France</option>
          <option value="Belgique">Belgique</option>
          <option value="Suisse">Suisse</option>
          <option value="Royaume-Uni">Royaume-Uni</option>
          <option value="Allemagne">Allemagne</option>
          <option value="Espagne">Espagne</option>
          <option value="Italie">Italie</option>
          <option value="Portugal">Portugal</option>
          <!-- Asie -->
          <option value="Chine">Chine</option>
          <option value="Inde">Inde</option>
          <option value="Japon">Japon</option>
          <option value="Corée du Sud">Corée du Sud</option>
          <option value="Indonésie">Indonésie</option>
          <option value="Philippines">Philippines</option>
          <option value="Émirats Arabes Unis">Émirats Arabes Unis</option>
          <option value="Turquie">Turquie</option>
        </select>
      </div>

      <div style="display:flex;align-items:center;">
        <button type="submit" class="btn" aria-label="S'abonner maintenant">S’abonner maintenant</button>
      </div>
    </form>

    <div class="toast" id="toast" role="alert" aria-live="assertive" aria-atomic="true"></div>
  </section>

  

  <script>
    function isValidEmail(email){
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  return re.test(String(email).trim());
}

    (function(){
      const toastEl=document.getElementById('toast');
      let toastTimer=null;
      window.showToast=function(message='',type='info'){
        if(!toastEl)return;
        toastEl.className='toast';
        toastEl.innerHTML='';
        const icon=document.createElement('div');icon.className='icon';icon.setAttribute('aria-hidden','true');
        const content=document.createElement('div');content.className='content';content.textContent=message;
        if(type==='success'){toastEl.classList.add('success');icon.textContent='✓';}
        else if(type==='error'){toastEl.classList.add('error');icon.textContent='⚠';}
        else{toastEl.classList.add('info');icon.textContent='ℹ';}
        toastEl.append(icon,content);
        toastEl.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer=setTimeout(()=>toastEl.classList.remove('show'),3000);
      };
    })();

    (function(){
      const form=document.getElementById('newsletterForm');
      if(!form)return;
      const fname=form.querySelector('#prenom');
      const lname=form.querySelector('#nom');
      const email=form.querySelector('#email');
      const pays=form.querySelector('#pays');
      const inputs=[fname,lname,email,pays];

      function markInvalid(el){if(!el)return;el.classList.remove('success');el.classList.add('invalid');setTimeout(()=>el.classList.remove('invalid'),900);}
      function markSuccess(el){if(!el)return;el.classList.remove('invalid');el.classList.add('success');setTimeout(()=>el.classList.remove('success'),1200);}

      form.addEventListener('submit',function(e){
        e.preventDefault();
        const vF=fname.value.trim();
        const vL=lname.value.trim();
        const vE=email.value.trim();
        const vP=pays.value.trim();
        if(!vF||!vL||!vE||!vP){
          inputs.forEach(inp=>{if(!inp.value.trim())markInvalid(inp);});
          showToast("Veuillez remplir tous les champs avant de continuer.","error");
          return;
        }
        if(!isValidEmail(vE)){
          markInvalid(email);
          showToast("Adresse email invalide.","error");
          return;
        }
        inputs.forEach(inp=>markSuccess(inp));
        showToast("Merci ! Vous êtes maintenant abonné à la newsletter.","success");
        setTimeout(()=>inputs.forEach(i=>i.value=''),700);
      });
    })();

    (function(){
      const reveals=document.querySelectorAll('.reveal');
      if(!('IntersectionObserver'in window)||!reveals.length){reveals.forEach(el=>el.classList.add('in-view'));return;}
      const io=new IntersectionObserver((entries,obs)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('in-view');obs.unobserve(entry.target);}});},{threshold:0.12});
      reveals.forEach(el=>io.observe(el));
    })();

    (function(){
      const toast=document.getElementById('toast');
      const originalShow=window.showToast;
      if(!toast||typeof originalShow!=='function')return;
      window.showToast=function(message,type){
        originalShow(message,type);
        if(type==='error'){
          const prev=document.activeElement;
          toast.setAttribute('tabindex','-1');toast.focus({preventScroll:true});
          setTimeout(()=>{if(prev&&typeof prev.focus==='function')prev.focus();toast.removeAttribute('tabindex');},700);
        }
      };
    })();
  </script>
</body>
</html>